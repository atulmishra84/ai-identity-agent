<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Identity Agent</title>
</head>
<body style="font-family: Arial, sans-serif; padding: 2rem;">
  <h2>AI Identity Agent</h2>

  <label>Action:
    <select id="action">
      <option value="provision">Provision</option>
      <option value="update">Update</option>
      <option value="deprovision">Deprovision</option>
    </select>
  </label>
  <br /><br />

  <form id="identityForm">
    <label>Email: <input name="email" required /></label><br /><br />
    <label>First Name: <input name="firstName" /></label><br /><br />
    <label>Last Name: <input name="lastName" /></label><br /><br />
    <label>Job Title: <input name="jobTitle" /></label><br /><br />
    <label>Department: <input name="department" /></label><br /><br />
    <label>Location: <input name="location" /></label><br /><br />
    <label>Employee ID: <input name="employeeId" /></label><br /><br />
    <label>Manager ID: <input name="managerId" /></label><br /><br />
    <label>Cost Center: <input name="costcenter" /></label><br /><br />
    <label>Region: <input name="region" /></label><br /><br />
    <button type="submit">Submit</button>
  </form>

  <h3>Response</h3>
  <pre id="response" style="background: #f4f4f4; padding: 1rem;"></pre>

  <script>
    const form = document.getElementById("identityForm");
    const responseDiv = document.getElementById("response");
    const actionSelect = document.getElementById("action");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const data = {};
      formData.forEach((v, k) => data[k] = v);

      const action = actionSelect.value;
      const endpointMap = {
        provision: "/provision/user",
        update: "/update/user",
        deprovision: "/deprovision/user"
      };

      const res = await fetch(endpointMap[action], {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const json = await res.json();
      responseDiv.textContent = JSON.stringify(json, null, 2);
    });
  </script>
</body>
</html>
